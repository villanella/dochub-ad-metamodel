seaf.change.uc:
  adh.hc_map.edit:
    story: ADH-3677
    title: Edit HC map
    priority: Medium
    needatest: true
    description: |

      1. User opens cluster - service
      2. User runs action "Add/Remove components"
      3. User adds, removes or moves one or more components.
      4. User clicks "Run" 
      5. HC map is changed. 
      
      **Alternative Flow**
      
      * 3a1. User hasn't changed HC map.
      * 3a2. Action fails with the error message "No changes applied".

  adh.hc_map.edit2:
    story: ADH-3677
    title: Test UC HC map
    priority: Low
    needatest: false
    description: |
      Blah blah
    

seaf.change.requirements:
  adh.hc_map.edit:
    title: Edit HC map
    type: functional
    story: ADH-3677
    status: implemented
    description: |
      1. Add new action "Add/Remove components" to the service. Remove other changing HC map actions from the service.
      2. Prechecks for Add and Remove **shall** be runned in the beginning of the action:
        - host availability;
        - removing from unavailable host which is not in MM should be available until bug in ADCM has been fixed;    
        - OS compatibility
      3. Disable the components from the ".remove" list
      4. Add components from the ".add" list 
      5. After install/disable only 1 restart of service should be made, and only if it's required. See the relevant component restarts table
      6. Run service post-install/post-expand checks
      7. Raise flags on depended services according to the relevant table for the service.
      8. If HC map is not changed show error message "No components has been selected for HC map changing"
    verifications:
      manual_check:
        title: Remove component from available host
        condition: Component is successfully removed
    usecases:
      - adh.hc_map.edit
  adh.hc_map.mm:
    title: Edit HC map in MM
    description: Test req
    usecases:
      - adh.hc_map.edit
      - adh.hc_map.edit2
    functionality:
      - adh
      - adh.security



seaf.change.adr:
  adh.hc_map.edit:
    title: Edit HC map
    moment: 2024-08-23
    story: ADH-3677
    problem: Too many changing HC map actions
    decision: Combine Add/Remove/Move actions into the single action.
    status: Development
    requirements:
      - adh.hc_map.edit
    deciders:
      - n.krupenkina
      - a.shitov
    usecases:
      - adh.hc_map.edit
    issue:
    context:
      -
    consequences:
      -
    dependencies:
      - test.adr





authors:
  n.krupenkina:
    name: Nadezhda
    surname: Krupenkina
    role: System Analyst
  a.shitov:
    name: Andrey
    surname: Shitov
    role: Architect
